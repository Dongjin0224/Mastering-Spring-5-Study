# 크로스 컷팅

스프링 애플리케이션은 레이어 구조로 만들어진다.  
일반적으론 프리젠테이션, 비즈니스, 데이터 레이어로 나뉘어진다.  
이것을 3 Tier Architecture 라고 한다.  

* 프리젠테이션 레이어
  * 애플리케이션 소비자에 중점을 두고, REST API 또는 사용자 인터페이스를 제공
* 비즈니스 레이어
  * 비즈니스 로직에 중점을 둔다.
* 데이터 레이어
  * 데이터베이스 및 외부 애플리케이션과의 통합에 중점을 둔다.

애플리케이션에는 여러 레이어를 가로질러 잘라내는 기능도 있다.  
* 로깅
* 시큐리티
* 성능 추적
* ...

여러 레이어를 가로지르는 이러한 문제를 크로스 컷팅이라고 한다.  
크로스 컷팅을 각각의 레이어에서 구현한다면 유지 관리는 어려워지기 때문에, 한 곳에서 구현하고 여러 레이어에 적용한다.  
이를 가능케 하는 프로그래밍 패러다임을 AOP(aspect-oriented programming, 관점 지향 프로그래밍)라 한다.  

AOP는 핵심 기능와 공통 기능를 분리하여 코드의 재사용성을 높여주는 프로그래밍 기법이다.  
AOP의 기본 개념은 핵심 기능에 공통 기능을 삽입하는 것.  
즉, 핵심 기능에만 집중할 수 있도록 중복해서 작성해야 하는 코드들을 따로 빼놓는 프로그래밍 방법이다.

<br>

## 중요한 AOP 용어
![image](https://user-images.githubusercontent.com/67637716/155653099-182ac2e9-40d8-4954-b414-c2ad042a72b3.png)  
* 핵심관심사항
  * 핵심 비지니스 로직을 다루는 관심 사항이다.
* 공통관심사항
  * 보안, 트랜잭션 등등 여러 객체에 공통으로 적용되는 관심사항이다.
  * 횡단 관심사를 의미한다.
* Target
  * 핵심사항이 구현된 객체를 말한다. 핵심 비지니스 로직를 가진 객체이다.
* JoinPoint
  * 공통관심사항이 적용될 수 있는 지점을 말한다.
  * 즉 Advice를 적용 가능한 지점을 의미한다.
  * 메서드 호출, 예외발생, 필드값 수정 또는 객체 생성이 JoinPoint가 될 수 있다.
* Advice
  * 공통관심사항의 구현 코드로 적용 시점을 정의 한다.
  * 핵심 비지니스 로직을 중심으로 언제 공통관심사항이 실행될 지를 정의한다.
  * around, Before, After, after-returning, after-throwing 와 같은 선언방식으로 사용한다.
* Aspect
  * JoinPoint와 Advice를 아우르는 표현이다.
  * 트랜잭션이나 보안등이 Aspect의 좋은 예이다.
* Weaving
  * JoinPoint에 Advice를 삽입하는 과정으로 핵심 비지니스 로직에 전혀 영향을 주지 않은 상태에서 공통관심기능을 추가하는 AOP의 핵심적인 처리과정이다.
  * 컴파일시, 클래스로딩시, 런타임시에 위빙할 수 있다.
