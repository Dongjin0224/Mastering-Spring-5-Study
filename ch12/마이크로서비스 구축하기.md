### 마이크로서비스 예제를 먼저 작성해 본다.
1. random한 5개의 number목록을 만들어주는 service  
``` java
spring.application.name=microservice-a

@Slf4j
@RestController
public class RandomNumberController {
	@RequestMapping("/random")
	public List<Integer> random() {
		List<Integer> numbers = new ArrayList<>();
		IntStream.rangeClosed(1, 5).forEach(num -> {
			numbers.add(generateRandomNumber());
		});

		log.info("Returning :::" + numbers);
		return numbers;

	}

	private int generateRandomNumber() {
		return (int) (Math.random() * 1000);
	}
}

```  

2. microservice-a에서 랜덤 목록 서비스를 소비하는 서비스  
``` java
server.port=8100
spring.application.name=service-consumer
number.service.url=http://localhost:8080/random

@Slf4j
@RestController
public class NumberAdderController {

	@Value("${number.service.url}")
	private String numberServiceUrl;

	@RequestMapping("/add")
	public Long add() {
		long sum = 0;

		ResponseEntity<Integer[]> responseEntity = new RestTemplate().getForEntity(numberServiceUrl, Integer[].class);

		Integer[] numbers = responseEntity.getBody();

		for (int number : numbers) {
			sum += number;
		}

		log.warn("Returning :::" + sum);
		return sum;
	}
}
```

http://localhost:8100/add url을 호출하면 microservice-a에서 random 목록이 리턴되고, 서비스 소비자의 add 서비스를 추가해 리턴받는다.  

# 마이크로서비스에 클라우드 네이티브 기능 추가
6개의 서로다른 마이크로서비스 애플리케이션과 구성요소를 만들기 위해 특정 애플리케이션에 특정 포트를 사용.  
![image](https://user-images.githubusercontent.com/67637716/159279939-6eb2bc6a-3dbd-4d01-a3eb-f46f673d6caf.png)


